<!-- Este article ocupa todo el espacio disponible del contenedor padre -->
<div *ngIf="loading$ | async">Cargando...</div>

<div *ngIf="error$ | async as error" class="text-red-500">Error: {{ error }}</div>

<article
  *ngIf="data$ | async as user"
  class="w-full h-full flex flex-col lg:flex-row items-stretch gap-6 p-6 lg:p-10 rounded-2xl overflow-hidden"
  role="main"
  aria-label="Página inicio usuario"
>
  <!-- PANEL IZQUIERDO: Perfil (fijo, ancho controlado) -->
  <aside
    class="flex-shrink-0 w-full lg:w-80 bg-gradient-to-b from-white/60 to-white/30 rounded-xl p-6 flex flex-col items-center text-center"
    aria-label="Panel de perfil"
  >
    <!-- Avatar -->
    <ng-container *ngIf="user.foto_perfil; else avatarPlaceholder">
      <img
        [src]="user.foto_perfil"
        [alt]="'Foto de perfil de ' + user.username"
        class="w-24 h-24 rounded-full object-cover ring-4 ring-white shadow"
        loading="lazy"
      />
    </ng-container>

    <ng-template #avatarPlaceholder>
      <div
        class="w-36 h-36 rounded-full flex items-center justify-center text-4xl font-bold bg-gray-100 text-slate-800 ring-4 ring-white shadow"
        aria-hidden="true"
      >
        {{ user.username && user.username.charAt(0) }}
      </div>
    </ng-template>

    <!-- Nombre / email -->
    <h2 class="mt-4 text-xl md:text-2xl font-semibold text-slate-900 truncate flex">
      {{ user.username }}
      <P (click)="editarPerfil(user.id)" class="text-sm text-gray-500 hover:cursor-pointer">Editar</P>
    </h2>
    <p class="mt-1 text-sm text-slate-500 truncate" title="{{ user.email }}">
      {{ user.email }}
    </p>

    <!-- Buttons verticales -->
    <!-- <div class="mt-6 w-full flex flex-col gap-3">
      <button
        class="w-full px-4 py-2 rounded-lg text-sm font-medium border border-slate-200"
        aria-label="Editar perfil"
      >
        Editar
      </button>
    </div> -->

    <!-- Meta compacta abajo -->
    <div class="mt-auto text-xs text-slate-500 w-full text-left">
      <p class="truncate"><strong>ID:</strong> {{ user.id }}</p>
      <p class="truncate"><strong>Firebase:</strong> {{ user.firebaseUid }}</p>
    </div>
  </aside>

  <!-- PANEL DERECHO: Contenido expandible (ocupa todo el espacio restante) -->
  <section class="flex-1 bg-white/50 rounded-xl p-6 overflow-auto" aria-label="Contenido principal">
    <!-- Hero / bienvenida -->
    <header class="mb-6">
      <h1 class="text-2xl md:text-3xl font-extrabold text-slate-900 leading-tight">
        ¡Bienvenido, {{ user.username }}!
      </h1>
      <p class="mt-2 text-sm md:text-base text-slate-600 max-w-2xl">
        Esta es tu página de inicio. Aquí puedes ver un resumen de tu actividad, proyectos recientes
        y accesos rápidos.
      </p>
    </header>

    <!-- Grid de bloques (adaptable): reemplaza o rellena con datos reales -->
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
      <!-- Ejemplo: proyectos -->
      <!-- <div class="p-4 rounded-lg bg-white shadow-sm">
        <h3 class="text-sm font-semibold text-slate-800">Proyectos</h3>
        <p class="mt-2 text-xs text-slate-500">Accede a tus proyectos desde aquí.</p>
      </div> -->

      <!-- Puedes añadir más bloques o un slot para contenido dinámico -->
    </div>
  </section>
</article>
